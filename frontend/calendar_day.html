
<!doctype html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Programaciones del día</title>
<style>body{font:15px system-ui;background:#f5f7f6;color:#0e2720;margin:0}
.wrap{max-width:1000px;margin:20px auto;padding:0 16px}
.card{background:#fff;border:1px solid #e6efea;border-radius:16px;box-shadow:0 18px 50px rgba(6,68,39,.12);padding:16px}
table{width:100%;border-collapse:separate;border-spacing:0}th,td{border-bottom:1px solid #e6efea;padding:10px;text-align:left}
.badge{display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid #cfe2da;background:#eef7f1}
.btn{border:0;background:#064427;color:#fff;border-radius:10px;padding:10px 12px;font-weight:700;cursor:pointer;text-decoration:none}
</style>
<div class="wrap"><a class="btn" href="/calendar.html">← Calendario</a><h1 id="title"></h1>
<div class="card"><table><thead><tr><th>#</th><th>Paciente</th><th>DNI</th><th>Cobertura</th><th>Médico</th><th>Sector</th><th>Estado</th></tr></thead><tbody id="tbody"><tr><td colspan="7">Cargando…</td></tr></tbody></table></div></div>
<script>
const u=new URL(location.href); const date=u.searchParams.get('date')||''; document.getElementById('title').textContent='Programaciones '+date;
async function load(){
  const r=await fetch('/api/calendar-day?fechaExacta='+encodeURIComponent(date)); const d=await r.json();
  const tbody=document.getElementById('tbody');
  tbody.innerHTML=(d.rows||[]).map((p,i)=>`<tr><td>${i+1}</td><td><b>${p.nombre}</b></td><td>${p.dni||''}</td><td>${p.cobertura||''}</td><td>${p.medico||''}</td><td>${p.sector_code||''}</td><td><span class="badge">${p.estado||'Pendiente'}</span></td></tr>`).join('')||'<tr><td colspan="7">Sin turnos</td></tr>';
}
load();
</script>
